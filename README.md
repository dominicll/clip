# clip - URL Shortener Challenge
Python URL shortener on the command line with focus on code simplicity. Shortened URLs survive an application restart through the json data file _clip.db_. 

## Functionalities

From a full URL, generate a short URL (shorten URL)
```
$ ./clip http://www.extremeprogramming.org/rules/simple.html
http://cl.ip/4u5jwS5lRD
```

From a previously generated short URL, provide the corresponding long URL (expand URL)
```
$ ./clip --expand http://cl.ip/4u5jwS5lRD
http://www.extremeprogramming.org/rules/simple.html
```

Shorten (or expand) multiples URLs from a file
```
$ ./clip --input test.txt 
http://cl.ip/S6CDFyUAKW
http://cl.ip/8nTNWDO0QR
http://cl.ip/KDw6ntKdiG
http://cl.ip/Mu4FaNtpTE
```

## Features

**Shorten URL** 

a) Only full absolute http urls can be shorten. 
```
./clip "../image/x.jpg"	
Error: Not full absolute url. Urls must start with http://

./clip ftp://example.com/index.html
Error: Not full absolute url. Urls must start with http://
```
b) Identical URLs always result in the same short URL (as long as the options for keys are not changed or the database is not reinitialized)
```
./clip "http://google.com"	
http://cl.ip/2le961GJac

./clip "http://google.com"	
http://cl.ip/2le961GJac
```
c) By default, short URLs generated begin with: http://cl.ip/ and are followed by a series of 10 alphanumerical
characters. This can be changed with options *--short-url-prefix*, *--key-length* and *--key-base*.
```
./clip --short-url-prefix http://localhost:5000/ --key-length 4 --key-base 10 http://example.com
http://localhost:5000/7911
```

**Expand URL** 

a) Given a short URL with the option *--expand* or *-e* the original non-shortened URL is returned.
```
./clip --expand http://cl.ip/4u5jwS5lRD
http://www.extremeprogramming.org/rules/simple.html

./clip -e http://cl.ip/2le961GJac
http://google.com
```

b) If the short URL provided has not been previously generated by the program, an error should be given.
```
./clip --expand http://cl.ip/0000
Error: URL not found.
```

## More features

** Database ** 

Shortened URLs survive an application restart by being saved in file clip.db. This is a json data file easy to inspect for debugging. The database can be reinitialized by deleting this file or by using the option *--dp-reset*.
```
./clip http://google.com/
http://cl.ip/Ikb9uxtHru

./clip --expand http://cl.ip/Ikb9uxtHru
http://google.com/

./clip --db-reset	
Info: reseting short url databse.

./clip --expand http://cl.ip/Ikb9uxtHru
Error: URL not found.
```
** Key generation algoritms **

Multiple key generation algorithms are available. The default is *Sha* based on a hashing function applied on the long url. Even without a database this algorithm will always try to return the same key for the same url. A database is still needed to expand URLs and to manage key collision.  
```
./clip --key-algo sha http://google.com/
http://cl.ip/Ikb9uxtHru
./clip --db-reset	
Info: reseting short url databse.
./clip --key-algo sha http://google.com/
http://cl.ip/Ikb9uxtHru

*Random* algorithm create a new random key every time a new url is submitted. After a database reset, new random unrelated keys are generated.
```
./clip --key-algo random http://google.com/
http://cl.ip/kvbbzqc0PW
./clip --db-reset	
Info: reseting short url databse.
./clip --key-algo random http://google.com/
http://cl.ip/zjpVk8GRav
```

*Sequence* this algorithm generate keys based on a sequential order. After a database reset the first key to be generated is always the same irrespective of the specific URLs being submitted.  







